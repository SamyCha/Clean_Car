<div class="row" style="margin-bottom: 20px;">
  <div class="swiper-container swiper-container-horizontal">
    <div class="swiper-wrapper" style="transition-duration: 0ms; transform: translate3d(-1860px, 0px, 0px);">

      <div class="swiper-slide" style="height: 19vh; margin-right: 30px; background-color: #e5e5e5;">
          <%= link_to new_car_path, class: "col-xs-12", style: "height: 100%; display: flex; align-items: center; justify-content: center;" do %>
            <h4>Create new car</h4>
        <% end %>
      </div>

      <% @cars.each do |car| %>
        <div class="swiper-slide" id="<%= car.id %>" style="height: 19vh; margin-right: 30px; background-color: #e5e5e5; display: flex; align-items: center;">
          <div class="col-xs-4 col-xs-offset-1">
            <% if car.car_picture && !car.car_picture.blank? %>
              <%= image_tag car.car_picture, class: "img-circle" %>
            <% else %>
              <%= image_tag "car_picto.png", style: "width: 100%; height: 14vh; background-color: white;", class: "img-circle" %>
            <% end %>
          </div>
          <div class="col-xs-6">
            <div style="display: flex; justify-content: space-around; align-items: center">
              <span style="font-size: 26px;">
                <%= car.brand %>
                <%= car.model %>
              </span>
              (<%= car.color %>)
            </div>
            <h6 style="display: flex; justify-content: space-around;">
              <small>
                <%= car.immatriculation %>
              </small>
              <%= Category.find(car.category_id).name %>
            </h6>
          </div>
        </div>
      <% end %>

    </div>

    <div class="swiper-pagination swiper-pagination-clickable swiper-pagination-bullets">
    </div>

    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
  </div>
</div>

<script>
  var swiper = new Swiper('.swiper-container', {
    initialSlide: 1,
    roundLengths: true,
    pagination: '.swiper-pagination',
    paginationClickable: true,
    nextButton: '.swiper-button-next',
    prevButton: '.swiper-button-prev',
    spaceBetween: 30,
    onSlideChangeEnd: function (swiper) {
      var carId = $(".swiper-slide-active").attr('id');
      $('#car_id_field').val(carId);
    }
  });
</script>

