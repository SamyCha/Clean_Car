<div class="row margin-bottom20">
  <div class="swiper-container swiper-container-horizontal">
    <div class="swiper-wrapper">
      <div class="swiper-slide create-car-slide">
        <%= link_to "Create new car", new_car_path, class: "col-xs-12 create-car-link"%>
      </div>

      <% @cars.each do |car| %>
        <div class="swiper-slide car-slide" id="<%= car.id %>">
          <div class="col-xs-4 col-xs-offset-1">
            <% if car.car_picture && !car.car_picture.blank? %>
              <%= image_tag car.car_picture, class: "img-circle" %>
            <% else %>
              <%= image_tag "normal_car.svg",  class: "img-circle" %>
            <% end %>
          </div>
          <div class="col-xs-6">
            <div style="display: flex; justify-content: space-around; align-items: center">
              <span style="font-size: 26px;">
                <%= car.brand %>
                <%= car.model %>
              </span>
              (<%= car.color %>)
            </div>
            <h6 style="display: flex; justify-content: space-around;">
              <small>
                <%= car.immatriculation %>
              </small>
              <%= Category.find(car.category_id).name %>
            </h6>
          </div>
        </div>
      <% end %>

    </div>

    <div class="swiper-pagination swiper-pagination-clickable swiper-pagination-bullets">
    </div>

    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
  </div>
</div>

<script>
  var swiper = new Swiper('.swiper-container', {
    initialSlide: 1,
    roundLengths: true,
    pagination: '.swiper-pagination',
    paginationClickable: true,
    nextButton: '.swiper-button-next',
    prevButton: '.swiper-button-prev',
    spaceBetween: 30,
    onSlideChangeEnd: function (swiper) {
      var carId = $(".swiper-slide-active").attr('id');
      $('#car_id_field').val(carId);
    }
  });
</script>

